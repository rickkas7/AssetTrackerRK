<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AssetTrackerRK: AssetTrackerRK</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AssetTrackerRK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">AssetTrackerRK </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><em>Alternative library for the Particle AssetTracker/Electron based on TinyGPS++</em></p>
<p>This is an alternative implementation of the library for the Particle Electron <a class="el" href="class_asset_tracker.html" title="Compatible replacement for the official Particle AssetTracker/Electron library.">AssetTracker</a>. I used my own <a href="https://github.com/rickkas7/">LIS3DH driver</a> and <a href="https://github.com/mikalhart/TinyGPSPlus">TinyGPS++</a>.</p>
<p>I prefer the TinyGPS++ library as I find it to be more reliable, and my LIS3DH driver supports some more options including getting accelerometer data, direction sensing, and wake-on-move.</p>
<p>In addition to the Electron-based <a class="el" href="class_asset_tracker.html" title="Compatible replacement for the official Particle AssetTracker/Electron library.">AssetTracker</a> v1 and v2, it can be used with many GPS boards that use either the PA6H (PMTK protocol) or u-blox line of serial-connected GPS chipsets.</p>
<p>There's also an optional <a class="el" href="class_asset_tracker.html" title="Compatible replacement for the official Particle AssetTracker/Electron library.">AssetTracker</a> almost-drop-in replacement. I prefer to access the LIS3DH driver and TinyGPS++ directly, because they have many more features than the original <a class="el" href="class_asset_tracker.html" title="Compatible replacement for the official Particle AssetTracker/Electron library.">AssetTracker</a> library. But for initial testing, the replacement shim is pretty handy. Note the <code>preNMEA()</code> method always return an empty string, because TinyGPS++ doesn't export a function to get that information.</p>
<p>There is also support for threaded mode. In threaded mode, the GPS serial port is read from a separate thread. This eliminates the need to do it from loop, and dramatically reduces the chance of lost or corrupted GPS data caused by blocking the loop long enough to overflow the 64-byte serial buffer.</p>
<p>Official project location: <a href="https://github.com/rickkas7/AssetTrackerRK">https://github.com/rickkas7/AssetTrackerRK</a></p>
<p>You can browse the full API documentation here: <a href="https://rickkas7.github.io/AssetTrackerRK">https://rickkas7.github.io/AssetTrackerRK</a>.</p>
<p>Also note: If you are using this directly from the Particle Firmware Libraries manager it will automatically include the LIS3DH driver as well. If you are manually copying the source from here, you will also need:</p>
<p><a href="https://github.com/rickkas7/LIS3DH">https://github.com/rickkas7/LIS3DH</a></p>
<p>By the way, I highly recommend adding an external active GPS antenna and the CR1220 coin cell battery with the <a class="el" href="class_asset_tracker.html" title="Compatible replacement for the official Particle AssetTracker/Electron library.">AssetTracker</a> V1. With this combination, the wake-on-move and report GPS location example can get a GPS fix in 2 to 7 seconds!</p>
<p>The <a class="el" href="class_asset_tracker.html" title="Compatible replacement for the official Particle AssetTracker/Electron library.">AssetTracker</a> V2 includes a supercapacitor that eliminates the need for the coin cell as long as you normally have power available to the GPS.</p>
<h1>Examples</h1>
<p>The code should be straightforward to use. The examples include:</p>
<h2>1 Simple GPS</h2>
<p>Simple example of using the GPS to report the current location to serial and Publish to the cloud.</p>
<h2>2 GPS Celullar On/Off</h2>
<p>Like the previous example, but supports turning cellular on or off. Pressing the MODE button toggles the cellular connection.</p>
<h2>3 Wake On Move</h2>
<p>Wakes the Electron when moved and publishes the current location from the GPS.</p>
<h2>4 Accelerometer Samples</h2>
<p>Prints XYZ data from the accelerometer to the debug USB serial connection.</p>
<h2>5 Accelerometer Direction</h2>
<p>The LIS3DH accelerometer has the ability to detect when it's stable in one of 6 orientations. This code prints the current orientation to the debug USB serial connection.</p>
<h2>6 Backward Compatible API</h2>
<p>Example of using the original <a class="el" href="class_asset_tracker.html" title="Compatible replacement for the official Particle AssetTracker/Electron library.">AssetTracker</a> API with the this library.</p>
<h2>7 Data Dump Tool</h2>
<p>This prints the raw data from the GPS, which can be useful for debugging.</p>
<h2>8 Threaded Mode</h2>
<p>This uses the threaded mode, which allows the GPS to run efficiently and without errors if you have blocking code in your loop() function. This is recommended instead of the simple method used earlier.</p>
<h2>9 I2C</h2>
<p>Version 0.2.2 and later of the library supports a u-blox GPS (tested with a MAX-M8-Q) using I2C instead of serial. This is particularly helpful on Gen 3 devices like the Boron, which does not have as many serial ports as the Electron.</p>
<h2>10 Pass-Through</h2>
<p>The Pass-Through firmware is used primarily so you can use the u-blox <a href="https://www.u-blox.com/en/product/u-center">u-center</a> app with the <a class="el" href="class_asset_tracker.html" title="Compatible replacement for the official Particle AssetTracker/Electron library.">AssetTracker</a> V2. This Windows-based software allows you to decode the data from the GPS and issue commands using a graphical user interface.</p>
<p>Flash the pass-through software to your <a class="el" href="class_asset_tracker.html" title="Compatible replacement for the official Particle AssetTracker/Electron library.">AssetTracker</a> V2. It will boot into manual mode (breathing white). Run the u-center application and select the USB port for the Electron.</p>
<p>In order to remove the pass-through software you'll probably need to use DFU mode (blinking yellow) or safe mode (breathing magenta) since the cloud is deactivated by this example.</p>
<h2>11 AssistNow</h2>
<p>This example uses the u-blox AssistNow service to download almanac and ephemeris data over cellular and upload it to the modem, instead of waiting for it to arrive by satellite. This can greatly speed time to first fix on compatible GPS models. See <a href="https://github.com/rickkas7/AssetTrackerRK/blob/master/AssistNow.md">AssistNow</a> for more information.</p>
<h1>Updates</h1>
<h2>Updated in 0.1.1</h2>
<p>Fixed compatibility with system firmware 0.6.1. The Arduino compatibility in that version conflicted with the Arduino compatibility built into TinyGPS++.</p>
<h2>Updated in 0.1.2</h2>
<p>Added compatibility with <a class="el" href="class_asset_tracker.html" title="Compatible replacement for the official Particle AssetTracker/Electron library.">AssetTracker</a> v2. This is just basic compatibility with getting GPS data; more advanced options for controlling it will be added later.</p>
<h2>Updated in 0.2.0</h2>
<ul>
<li>Implement all official <a class="el" href="class_asset_tracker.html" title="Compatible replacement for the official Particle AssetTracker/Electron library.">AssetTracker</a> methods</li>
<li>Upgrade to LIS3DH 0.2.3</li>
<li>Refactoring</li>
<li>Parser Unit Tests</li>
</ul>
<h2>Updated in 0.2.1</h2>
<ul>
<li>Additional documentation</li>
<li>Support for threaded mode</li>
</ul>
<h2>Updated in 0.2.2</h2>
<ul>
<li>Support for u-blox GPS connected by I2C instead of serial</li>
</ul>
<h2>Updated in 0.3.1</h2>
<ul>
<li>Minimum supported Device OS version is now 0.9.0. Tested mostly with 1.4.4.</li>
<li>Added u-blox <a href="https://github.com/rickkas7/AssetTrackerRK/blob/master/AssistNow.md">AssistNow</a> support (beta)</li>
<li>Added u-center pass-through example </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
