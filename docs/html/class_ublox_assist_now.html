<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AssetTrackerRK: UbloxAssistNow Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AssetTrackerRK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">UbloxAssistNow Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Class to use u-blox AssistNow to get a faster GPS fix.  
 <a href="class_ublox_assist_now.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_ublox_g_p_s_8h_source.html">UbloxGPS.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6afeb90150eb7f7ea1073e557b9b8115"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ublox_assist_now.html#a6afeb90150eb7f7ea1073e557b9b8115">UbloxAssistNow</a> ()</td></tr>
<tr class="memdesc:a6afeb90150eb7f7ea1073e557b9b8115"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor. You typically instantiate one of these as a global variable if you want to use AssistNow.  <a href="class_ublox_assist_now.html#a6afeb90150eb7f7ea1073e557b9b8115">More...</a><br /></td></tr>
<tr class="separator:a6afeb90150eb7f7ea1073e557b9b8115"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a902fb9dc942dca05aff3d5523d1ee49b"><td class="memItemLeft" align="right" valign="top"><a id="a902fb9dc942dca05aff3d5523d1ee49b"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ublox_assist_now.html#a902fb9dc942dca05aff3d5523d1ee49b">~UbloxAssistNow</a> ()</td></tr>
<tr class="memdesc:a902fb9dc942dca05aff3d5523d1ee49b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. <br /></td></tr>
<tr class="separator:a902fb9dc942dca05aff3d5523d1ee49b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae04cf7bae1bfbf24adf29fb0cbb315cc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_ublox_assist_now.html">UbloxAssistNow</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ublox_assist_now.html#ae04cf7bae1bfbf24adf29fb0cbb315cc">withAssistNowKey</a> (const char *<a class="el" href="class_ublox_assist_now.html#aaa2e872e3de140f982cba10307cf5bd1">assistNowKey</a>)</td></tr>
<tr class="memdesc:ae04cf7bae1bfbf24adf29fb0cbb315cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Required! Pass your AssistNow API key in this function.  <a href="class_ublox_assist_now.html#ae04cf7bae1bfbf24adf29fb0cbb315cc">More...</a><br /></td></tr>
<tr class="separator:ae04cf7bae1bfbf24adf29fb0cbb315cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac27d2cb74282c7b2b04364ac71cb35c8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_ublox_assist_now.html">UbloxAssistNow</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ublox_assist_now.html#ac27d2cb74282c7b2b04364ac71cb35c8">withDisableLocation</a> ()</td></tr>
<tr class="memdesc:ac27d2cb74282c7b2b04364ac71cb35c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runs AssistNow without location hinting.  <a href="class_ublox_assist_now.html#ac27d2cb74282c7b2b04364ac71cb35c8">More...</a><br /></td></tr>
<tr class="separator:ac27d2cb74282c7b2b04364ac71cb35c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72b8e75276f737cb9f165a0976f37f0f"><td class="memItemLeft" align="right" valign="top"><a id="a72b8e75276f737cb9f165a0976f37f0f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ublox_assist_now.html#a72b8e75276f737cb9f165a0976f37f0f">setup</a> ()</td></tr>
<tr class="memdesc:a72b8e75276f737cb9f165a0976f37f0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call from main application setup. Required! <br /></td></tr>
<tr class="separator:a72b8e75276f737cb9f165a0976f37f0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00f10be81dfe6d91e01a3c2ca407befc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ublox_assist_now.html#a00f10be81dfe6d91e01a3c2ca407befc">loop</a> ()</td></tr>
<tr class="memdesc:a00f10be81dfe6d91e01a3c2ca407befc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call from main application loop. Required!  <a href="class_ublox_assist_now.html#a00f10be81dfe6d91e01a3c2ca407befc">More...</a><br /></td></tr>
<tr class="separator:a00f10be81dfe6d91e01a3c2ca407befc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:ac8b84655df90e8dc9518602634bb43c0"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_ublox_assist_now.html">UbloxAssistNow</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ublox_assist_now.html#ac8b84655df90e8dc9518602634bb43c0">getInstance</a> ()</td></tr>
<tr class="memdesc:ac8b84655df90e8dc9518602634bb43c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the singleton instance of this class,.  <a href="class_ublox_assist_now.html#ac8b84655df90e8dc9518602634bb43c0">More...</a><br /></td></tr>
<tr class="separator:ac8b84655df90e8dc9518602634bb43c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:aca720ed4c9b8eb18077c91817d9b578f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ublox_assist_now.html#aca720ed4c9b8eb18077c91817d9b578f">stateWaitConnected</a> ()</td></tr>
<tr class="memdesc:aca720ed4c9b8eb18077c91817d9b578f"><td class="mdescLeft">&#160;</td><td class="mdescRight">State machine handler for waiting for a Particle cloud connection (internal)  <a href="class_ublox_assist_now.html#aca720ed4c9b8eb18077c91817d9b578f">More...</a><br /></td></tr>
<tr class="separator:aca720ed4c9b8eb18077c91817d9b578f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07cf122acc31193662e400abb43af41e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ublox_assist_now.html#a07cf122acc31193662e400abb43af41e">stateWaitLocation</a> ()</td></tr>
<tr class="memdesc:a07cf122acc31193662e400abb43af41e"><td class="mdescLeft">&#160;</td><td class="mdescRight">State machine handler for waiting for location data (internal)  <a href="class_ublox_assist_now.html#a07cf122acc31193662e400abb43af41e">More...</a><br /></td></tr>
<tr class="separator:a07cf122acc31193662e400abb43af41e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57a07adfe7daa7a498c06de258b526b7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ublox_assist_now.html#a57a07adfe7daa7a498c06de258b526b7">stateSendRequest</a> ()</td></tr>
<tr class="memdesc:a57a07adfe7daa7a498c06de258b526b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">State machine handler for sending a request (internal)  <a href="class_ublox_assist_now.html#a57a07adfe7daa7a498c06de258b526b7">More...</a><br /></td></tr>
<tr class="separator:a57a07adfe7daa7a498c06de258b526b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8790e562228f9e874a64f418c36e37c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ublox_assist_now.html#ac8790e562228f9e874a64f418c36e37c">stateReadResponse</a> ()</td></tr>
<tr class="memdesc:ac8790e562228f9e874a64f418c36e37c"><td class="mdescLeft">&#160;</td><td class="mdescRight">State machine handler for reading the response from the u-blox server (internal)  <a href="class_ublox_assist_now.html#ac8790e562228f9e874a64f418c36e37c">More...</a><br /></td></tr>
<tr class="separator:ac8790e562228f9e874a64f418c36e37c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a508af88970b27fe72d8f1dd094cd7c82"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ublox_assist_now.html#a508af88970b27fe72d8f1dd094cd7c82">stateSendToGPS</a> ()</td></tr>
<tr class="memdesc:a508af88970b27fe72d8f1dd094cd7c82"><td class="mdescLeft">&#160;</td><td class="mdescRight">State machine handler for sending data to the GPS (internal)  <a href="class_ublox_assist_now.html#a508af88970b27fe72d8f1dd094cd7c82">More...</a><br /></td></tr>
<tr class="separator:a508af88970b27fe72d8f1dd094cd7c82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc90b4b9ace7297cd7681fc7a6834047"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ublox_assist_now.html#afc90b4b9ace7297cd7681fc7a6834047">stateDone</a> ()</td></tr>
<tr class="memdesc:afc90b4b9ace7297cd7681fc7a6834047"><td class="mdescLeft">&#160;</td><td class="mdescRight">State machine handler used when done (internal)  <a href="class_ublox_assist_now.html#afc90b4b9ace7297cd7681fc7a6834047">More...</a><br /></td></tr>
<tr class="separator:afc90b4b9ace7297cd7681fc7a6834047"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ebead4980c8a9c28e11673e8d254c3c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ublox_assist_now.html#a2ebead4980c8a9c28e11673e8d254c3c">subscriptionHandler</a> (const char *event, const char *data)</td></tr>
<tr class="memdesc:a2ebead4980c8a9c28e11673e8d254c3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Particle event subscription handler (internal)  <a href="class_ublox_assist_now.html#a2ebead4980c8a9c28e11673e8d254c3c">More...</a><br /></td></tr>
<tr class="separator:a2ebead4980c8a9c28e11673e8d254c3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a7721decb787ce944c322d2c276d1daf3"><td class="memItemLeft" align="right" valign="top"><a id="a7721decb787ce944c322d2c276d1daf3"></a>
std::function&lt; void(<a class="el" href="class_ublox_assist_now.html">UbloxAssistNow</a> *)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ublox_assist_now.html#a7721decb787ce944c322d2c276d1daf3">stateHandler</a> = &amp;<a class="el" href="class_ublox_assist_now.html#aca720ed4c9b8eb18077c91817d9b578f">UbloxAssistNow::stateWaitConnected</a></td></tr>
<tr class="memdesc:a7721decb787ce944c322d2c276d1daf3"><td class="mdescLeft">&#160;</td><td class="mdescRight">State handler function. <br /></td></tr>
<tr class="separator:a7721decb787ce944c322d2c276d1daf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff94b274069556b00829a4b4ad5dc80a"><td class="memItemLeft" align="right" valign="top"><a id="aff94b274069556b00829a4b4ad5dc80a"></a>
unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ublox_assist_now.html#aff94b274069556b00829a4b4ad5dc80a">stateTime</a> = 0</td></tr>
<tr class="memdesc:aff94b274069556b00829a4b4ad5dc80a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Time used for state transition timeouts. The millis() value at the start of the wait. <br /></td></tr>
<tr class="separator:aff94b274069556b00829a4b4ad5dc80a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9a95cb7ca8f5be2ed92868ebb5b1ae7"><td class="memItemLeft" align="right" valign="top"><a id="aa9a95cb7ca8f5be2ed92868ebb5b1ae7"></a>
<a class="el" href="class_assist_now_download.html">AssistNowDownload</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ublox_assist_now.html#aa9a95cb7ca8f5be2ed92868ebb5b1ae7">download</a> = 0</td></tr>
<tr class="memdesc:aa9a95cb7ca8f5be2ed92868ebb5b1ae7"><td class="mdescLeft">&#160;</td><td class="mdescRight">State data for downloading including the buffer. This is only allocated when we are downloading to save RAM. <br /></td></tr>
<tr class="separator:aa9a95cb7ca8f5be2ed92868ebb5b1ae7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65805930c5ffd9b48b294e0f01c23d9c"><td class="memItemLeft" align="right" valign="top"><a id="a65805930c5ffd9b48b294e0f01c23d9c"></a>
unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ublox_assist_now.html#a65805930c5ffd9b48b294e0f01c23d9c">packetDelay</a> = 1</td></tr>
<tr class="memdesc:a65805930c5ffd9b48b294e0f01c23d9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delay in milliseconds between messages sent to the GPS during stateSendToGPS. <br /></td></tr>
<tr class="separator:a65805930c5ffd9b48b294e0f01c23d9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a490d3d7f06f7e2d58db1ac68acc4bda7"><td class="memItemLeft" align="right" valign="top"><a id="a490d3d7f06f7e2d58db1ac68acc4bda7"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ublox_assist_now.html#a490d3d7f06f7e2d58db1ac68acc4bda7">disableLocation</a> = false</td></tr>
<tr class="memdesc:a490d3d7f06f7e2d58db1ac68acc4bda7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set to true to disable getting location data. This causes slower time to first sync and larger downloads. <br /></td></tr>
<tr class="separator:a490d3d7f06f7e2d58db1ac68acc4bda7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e494bdc44a5c57d88b1a56283eba784"><td class="memItemLeft" align="right" valign="top"><a id="a3e494bdc44a5c57d88b1a56283eba784"></a>
unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ublox_assist_now.html#a3e494bdc44a5c57d88b1a56283eba784">waitLocationTimeoutMs</a> = 10000</td></tr>
<tr class="memdesc:a3e494bdc44a5c57d88b1a56283eba784"><td class="mdescLeft">&#160;</td><td class="mdescRight">Amount of time in milliseconds to wait for the location and elevation data to arrive. <br /></td></tr>
<tr class="separator:a3e494bdc44a5c57d88b1a56283eba784"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa2e872e3de140f982cba10307cf5bd1"><td class="memItemLeft" align="right" valign="top"><a id="aaa2e872e3de140f982cba10307cf5bd1"></a>
String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ublox_assist_now.html#aaa2e872e3de140f982cba10307cf5bd1">assistNowKey</a></td></tr>
<tr class="memdesc:aaa2e872e3de140f982cba10307cf5bd1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assist now API token/key. Required. <br /></td></tr>
<tr class="separator:aaa2e872e3de140f982cba10307cf5bd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afae8d36016454c006c1a2add86a9e00b"><td class="memItemLeft" align="right" valign="top"><a id="afae8d36016454c006c1a2add86a9e00b"></a>
String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ublox_assist_now.html#afae8d36016454c006c1a2add86a9e00b">assistNowServer</a> = &quot;online-live1.services.u-blox.com&quot;</td></tr>
<tr class="memdesc:afae8d36016454c006c1a2add86a9e00b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Server to contact for u-blox aiding data. <br /></td></tr>
<tr class="separator:afae8d36016454c006c1a2add86a9e00b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr class="memitem:a816954527ada503b77a55701de3cc7c9"><td class="memItemLeft" align="right" valign="top"><a id="a816954527ada503b77a55701de3cc7c9"></a>
static <a class="el" href="class_ublox_assist_now.html">UbloxAssistNow</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_ublox_assist_now.html#a816954527ada503b77a55701de3cc7c9">instance</a> = 0</td></tr>
<tr class="memdesc:a816954527ada503b77a55701de3cc7c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Singleton instance of this class. <br /></td></tr>
<tr class="separator:a816954527ada503b77a55701de3cc7c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class to use u-blox AssistNow to get a faster GPS fix. </p>
<p>Using this feature requires several things, described in greater detail in the documentation:</p><ul>
<li>u-blox access token (you can get this at no charge)</li>
<li>Google API token (you can probably use the free tier)</li>
<li>Particle Google Maps Integration to map cell tower ID to location</li>
<li>Particle Integration with Google Elevation API to get elevation from location</li>
</ul>
<p>As the data will be downloaded by cellular, this will increase your cellular data usage while decreasing the time to first fix. For more details, see the AssistNow.md file in the Github repository for more details.</p>
<p>You typically instantiate this object as a global variable in your main application file. You'll need to call the <a class="el" href="class_ublox_assist_now.html#ae04cf7bae1bfbf24adf29fb0cbb315cc" title="Required! Pass your AssistNow API key in this function.">withAssistNowKey()</a>, <a class="el" href="class_ublox_assist_now.html#a72b8e75276f737cb9f165a0976f37f0f" title="Call from main application setup. Required!">setup()</a>, and <a class="el" href="class_ublox_assist_now.html#a00f10be81dfe6d91e01a3c2ca407befc" title="Call from main application loop. Required!">loop()</a> methods.</p>
<p>You don't need to explicitly start AssistNow. It will automatically start when the cloud connects and will check the GPS to see if can see satellites. If it can see fewer than 3 satellites it will </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a6afeb90150eb7f7ea1073e557b9b8115"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6afeb90150eb7f7ea1073e557b9b8115">&#9670;&nbsp;</a></span>UbloxAssistNow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UbloxAssistNow::UbloxAssistNow </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. You typically instantiate one of these as a global variable if you want to use AssistNow. </p>
<p>This object has minimal storage requirements so it's OK to allocate it all of the time. It will determine if the GPS needs aiding data and request it automatically. The download temporary buffers are allocated only when needed and freed when done. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ac8b84655df90e8dc9518602634bb43c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8b84655df90e8dc9518602634bb43c0">&#9670;&nbsp;</a></span>getInstance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="class_ublox_assist_now.html">UbloxAssistNow</a>* UbloxAssistNow::getInstance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the singleton instance of this class,. </p>
<p>This class is normally instantiated once in the main application code. </p>

</div>
</div>
<a id="a00f10be81dfe6d91e01a3c2ca407befc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00f10be81dfe6d91e01a3c2ca407befc">&#9670;&nbsp;</a></span>loop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void UbloxAssistNow::loop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Call from main application loop. Required! </p>
<p>It returns quickly when not doing assist now so you can just call it all the time. </p>

</div>
</div>
<a id="afc90b4b9ace7297cd7681fc7a6834047"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc90b4b9ace7297cd7681fc7a6834047">&#9670;&nbsp;</a></span>stateDone()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void UbloxAssistNow::stateDone </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>State machine handler used when done (internal) </p>
<p>The done state will delete the <a class="el" href="class_assist_now_download.html" title="Class to hold things used during download.">AssistNowDownload</a> object if allocated, otherwise it does nothing. This state is entered if:</p>
<ul>
<li>AssistNow is not needed (GPS has a fix)</li>
<li>The u-blox AssistNow API key has not been set</li>
<li>An error occurs (can't get geolocation, elevation, can't contact u-blox aiding server) </li>
</ul>

</div>
</div>
<a id="ac8790e562228f9e874a64f418c36e37c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8790e562228f9e874a64f418c36e37c">&#9670;&nbsp;</a></span>stateReadResponse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void UbloxAssistNow::stateReadResponse </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>State machine handler for reading the response from the u-blox server (internal) </p>
<p>If all of the data is read successfully, goes to stateSendToGPS. Otherwise, goes to stateWaitDone. There is no retry on failure, as if there is a cellular connection probably it's probably just better to let the GPS get its data from satellite.</p>
<p>Next state: stateSendToGPS or stateWaitDone. </p>

</div>
</div>
<a id="a57a07adfe7daa7a498c06de258b526b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57a07adfe7daa7a498c06de258b526b7">&#9670;&nbsp;</a></span>stateSendRequest()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void UbloxAssistNow::stateSendRequest </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>State machine handler for sending a request (internal) </p>
<p>This state prepares the request to the u-blox aiding data server and makes the connection. If an error occurs, goes to stateDone, otherwise goes to stateReadResponse.</p>
<p>Next state: stateReadResponse or stateWaitDone. </p>

</div>
</div>
<a id="a508af88970b27fe72d8f1dd094cd7c82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a508af88970b27fe72d8f1dd094cd7c82">&#9670;&nbsp;</a></span>stateSendToGPS()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void UbloxAssistNow::stateSendToGPS </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>State machine handler for sending data to the GPS (internal) </p>
<p>The stateReadResponse method buffers all of the GPS aiding data before sending it to the GPS. The data is generally under 3K, and buffering the whole data helps make sure it's valid and allows it to be sent out in more controlled bursts to the GPS. </p>

</div>
</div>
<a id="aca720ed4c9b8eb18077c91817d9b578f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca720ed4c9b8eb18077c91817d9b578f">&#9670;&nbsp;</a></span>stateWaitConnected()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void UbloxAssistNow::stateWaitConnected </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>State machine handler for waiting for a Particle cloud connection (internal) </p>
<p>In order to use the webhooks there must be a cloud connection. While in disableLocation mode technically we could start after cellular ready, the difference in time is not sufficient to warrant that special-case.</p>
<p>This state will either:</p>
<ul>
<li>Find that there are enough satellites visible (3 or more) and aiding won't likely help much now and go to the stateDone.</li>
<li>Get cell tower (or Wi-Fi) information and start a Google maps geolocation.</li>
</ul>
<p>Next state: stateWaitLocation or stateWaitDone </p>

</div>
</div>
<a id="a07cf122acc31193662e400abb43af41e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07cf122acc31193662e400abb43af41e">&#9670;&nbsp;</a></span>stateWaitLocation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void UbloxAssistNow::stateWaitLocation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>State machine handler for waiting for location data (internal) </p>
<p>Waits for location and elevation data. The subscriptionHandler will move to stateSendRequest if we get location and elevation.</p>
<p>If a timeout occurs (no location information for tower, or webhooks missing) then it will go to stateWaitDone.</p>
<p>Next state: stateSendRequest or stateWaitDone. </p>

</div>
</div>
<a id="a2ebead4980c8a9c28e11673e8d254c3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ebead4980c8a9c28e11673e8d254c3c">&#9670;&nbsp;</a></span>subscriptionHandler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void UbloxAssistNow::subscriptionHandler </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Particle event subscription handler (internal) </p>
<p>This is only activated if there is a need to do AssistNow. If the GPS already has a fix the subscription handler is not registered. </p>

</div>
</div>
<a id="ae04cf7bae1bfbf24adf29fb0cbb315cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae04cf7bae1bfbf24adf29fb0cbb315cc">&#9670;&nbsp;</a></span>withAssistNowKey()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ublox_assist_now.html">UbloxAssistNow</a>&amp; UbloxAssistNow::withAssistNowKey </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>assistNowKey</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Required! Pass your AssistNow API key in this function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">assistNowKey</td><td>The access token you received from u-blox for using the AssistNow service.</td></tr>
  </table>
  </dd>
</dl>
<p>The key looks like "c4Pufq9Wp1WnjXo1aNIN5g" as is not the same as any u-blox username or password you may have. </p>

</div>
</div>
<a id="ac27d2cb74282c7b2b04364ac71cb35c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac27d2cb74282c7b2b04364ac71cb35c8">&#9670;&nbsp;</a></span>withDisableLocation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_ublox_assist_now.html">UbloxAssistNow</a>&amp; UbloxAssistNow::withDisableLocation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Runs AssistNow without location hinting. </p>
<p>This mode does not require the Google Maps integration or the Elevation integration, however it does not improve the time to first fix as much, and also increases the data usage. With location hinting, the GPS can get a fix much more quickly, and the aiding data download is smaller because it can skip the satellite ephemeris data for satellites that won't be in view of your location.</p>
<p>Whenever possible you should use location hinting (set up the webhooks and don't call this function). </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="_ublox_g_p_s_8h_source.html">UbloxGPS.h</a></li>
<li>src/UbloxGPS.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
